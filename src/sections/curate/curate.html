<template class="task-template">
  <section id="curate-section" class="section js-section u-category-windows">

    <header class="section-header">
      <div class="section-wrapper">
        <h1>
          Prepare dataset
        </h1>
        <h3>This interface will walk you through the steps for performing an initial curation of your dataset before review by the Curation Team. Specify succesively your requirements (files to be added in the SPARC folder structure, metadata to be included, etc.), validate your dataset (based on specifications before it is actually generated), then generate your SPARC dataset (locally on your computer or directly on Blackfynn to avoid duplicating files locally). Check out the <a href="https://www.youtube.com/">tutorial video here</a> for an overview of the features before you start. </h3>
      </div>
    </header>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-new-window-demo-toggle" class="js-container-target demo-toggle-button"> Specify dataset files
          <div class="demo-meta u-avoid-clicks"> Specify desired local files to be added in each of the SPARC folders of your dataset
          </div>
        </button>
        <div class="demo-box">

          <form id = 'form-dataset-organize-form'>
            <div>
              <input id="organize-dataset" name="organizing-dataset" type="radio" class="with-style" />
              <label for="organize-dataset" class=labelradio> Organize my dataset </label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext"> Select this option to conveniently specify files to be included in your dataset following the SPARC folder structure</span>
                </div>
            </div>
            <div>
              <input id="preorganized-dataset" name="organizing-dataset" type="radio" class="with-style" />
              <label for="preorganized-dataset" class=labelradio> Dataset already organized </label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext"> Select this option when you already have the SPARC folder structure in place and you only want, e.g., to add description, include metadata files, validate the dataset, etc.</span>
                </div>
            </div>
            <div>
              <input id="smart-organize-dataset" name="organizing-dataset" type="radio" class="with-style" />
              <label for="smart-organize-dataset" class=labelradio> Smart organize </label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext">Select to automatically organize your dataset based on a previously saved organized structure. This applies if you are following a strict dataset organization structure (different than SPARC) and only the high-level folder changes from dataset to dataset</span>
                </div>
            </div>
          </form>


          <div id="div-smart-organize-dataset" class="datasetsaveoption">
            <div class="demo-controls">
              <p> Coming soon... Tentative date: December 2019 </p>
            </div>
          </div>

          <div id="div-pre-organized-dataset" class="datasetsaveoption">
            <h5> </h5>
            <div class="demo-controls">
            <button id="button-select-dataset" class="demo-button"> Select Dataset Folder </button>
            <p id="para-selected-dataset"></p>
            </div>
            <h5> </h5>
            <div class="demo-controls">
                  <table id="table-organized" class = pathtable>
                    <tr id='code_org'>
                      <th>code</th>
                      <th>description</th>
                    </tr>

                    <tr id='derivatives_org'>
                      <th>derivatives</th>
                      <th>description</th>
                    </tr>

                    <tr id='docs_org'>
                      <th>docs</th>
                      <th>description</th>
                    </tr>

                    <tr id="protocol_org">
                    <th>protocol</th>
                    <th>description</th>
                    </tr>

                    <tr id='samples_org'>
                      <th>samples</th>
                      <th>description</th>
                    </tr>

                    <tr id='sourcedata_org'>
                      <th>sourcedata</th>
                      <th>description</th>
                    </tr>

                    <tr id='subjects_org'>
                      <th>subjects</th>
                      <th>description</th>
                    </tr>

                    <tr id='main_org'>
                      <th>main</th>
                      <th>description</th>
                    </tr>

                  </table>
              </div>
          </div>

          <div id="div-organize-dataset" class="datasetsaveoption">
            <h5> Import previously saved file structure
              <div class="tooltipnew">( ? )
                <span class="tooltiptext">Import file containing any progress you saved earlier (see Save button below the table) </span>
              </div>
            </h5>
            <div class="demo-controls">
              <button id="button-select-upload-file-organization" class="demo-button"> Import </button>
              <p id='para-upload-file-organization-status'> <p>
            </div>
            <hr>

            <h5> Select folders and files to be added in each SPARC folder. 
              <div class="tooltipnew">( ? )
                <span class="tooltiptext">Select SPARC folder from the drop-down list them specify files/folders using the corresponding buttons. Their paths will be show in the table below where each header designate one of the SPARC folders ('main' designates the dataset folder).
                <br> <br>
                Alternatively, you could drag-and-drop files / folders on the table headers to import the them. 
                <br><br>
                If a folder is selected, only the folder path will be displayed in the table but all sub-folders and files will be included during dataset creation. 
                <br><br>
                Once a file/folder is added, you can add a description for it in the table. This description will be included in the corresponding manifest file. 
                </span>
              </div>
            </h5>
            <div class="demo-controls">
            	<p> Select SPARC folder: <p>
              <div>	<select id="SPARCfolderlist">
                <option> code </option>
                <option> derivatives </option>
                <option> docs </option>
                <option> protocol </option>
                <option> samples </option>
                <option> sourcedata </option>
                <option> subjects </option>
                <option> main </option></select>
              </div>
            </div>
            <div class="demo-controls">
                <p> Browse and select files/folders: </p>
              	<button id="button-select-code" class="demo-button">Add files </button>
              	<button id="button-select-code-directory" class="demo-button">Add folders</button>
            </div>
            <h5>  </h5>
            <div class="demo-controls">
                <table id="code_table" class = pathtable>
                  <tr id="code" droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                  	<th>code</th>
                    <th>description</th>
                  </tr>

                  <tr id='derivatives' droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                  	<th>derivatives</th>
                    <th>description</th>
                  </tr>

                  <tr id='docs' droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                    <th>docs</th>
                    <th>description</th>
                  </tr>

                  <tr id="protocol" droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                    <th>protocol</th>
                    <th>description</th>
                  </tr>

                  <tr id='samples' droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                    <th>samples</th>
                    <th>description</th>
                  </tr>

                  <tr id='sourcedata' droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                    <th>sourcedata</th>
                    <th>description</th>
                  </tr>

                  <tr id='subjects' droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                    <th>subjects</th>
                    <th>description</th>
                  </tr>

                  <tr id='main' droppable="true" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)" ondragover="return false">
                    <th>main</th>
                    <th>description</th>
                  </tr>
                </table>
            </div>

            <hr>
            <h5> Preview file organization
              <div class="tooltipnew">( ? )
                <span class="tooltiptext"> Get a preview of the dataset that would be generated based on the files you specified. The preview is generated in a default folder (called Preview) and all the files are 'mock' files (0 kb in size) with the name and extension of your actual files.
                <br><br>
                Only one Preview folder can be stored (to avoid accumulating them) so remember to click on 'Delete Preview Folder' once you're done!
                </span>
              </div>
            </h5>
            <div class="demo-controls">
                <button id="button-preview-file-organization" class="demo-button"> Preview </button>
                <p id='para-preview-organization-status'> <p>
            </div><br>
            <div class="demo-controls">
                <button id="button-delete-preview-organization-status" class="demo-button"> Delete Preview Folder </button>
                <p id='para-delete-preview-organization-status'> <p>
            </div>
          </div>

          <div id="div-save-table" class="datasetsaveoption">
            <h5> Save file organization to continue later
              <div class="tooltipnew">( ? )
                <span class="tooltiptext">Save the table you created as a CSV format file for continuing later (import it using the 'Import' button located above the table). 
                <br><br>
                You can optionally add file/folder paths and descriptions directly in the saved file (e.g. using MS Excel) before importing, if you find it more convenient.
                </span>
              </div>
            </h5>
            <div class="demo-controls">
              <button id="button-select-save-file-organization" class="demo-button"> Save </button>
              <p id='para-save-file-organization-status'> <p>
            </div>
          </div>

          <div id="div-clear-table" class="datasetsaveoption">
            <h5> </h5>
            <button id="button-clear-table" class="demo-button"> Clear table </button>
          </div>
          
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-manage-window-demo-toggle" class="js-container-target demo-toggle-button"> Handle file format conversion
          <div class="demo-meta u-avoid-clicks"> Choose files to be converted to SPARC defined standard formats before being added to your dataset  </div>
        </button>
        <div class="demo-box">
          <p> Coming soon... Tentative date: May 2020 </p>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button id="button-using-window-events-demo-toggle" class="js-container-target demo-toggle-button">
        Specify metadata files to be attached 
          <div class="demo-meta u-avoid-clicks"> Choose metadata files (manifest, submission, dataset_description, subjects and/or samples files) to be included in your dataset </div>
        </button>
        <div class="demo-box">

          <h5>Manifest file</h5>
          <div class="tooltipnew">( ? )
            <span class="tooltiptext">
            Select this option to include a manifest file in each of the SPARC folders. The 'filename', 'timestamp', and 'file type' fields will be populated automatically while the 'description' field will be populated based on the description (if any) you provided under  the 'Specify dataset files' feature. 
            </span>
          </div>

          <div class="demo-controls">
            <input id="generate-manifest" name="manifest" type="checkbox" class="with-style"/>
            <label for="generate-manifest" class=labelradio> Generate manifest files </label>
          </div>

          <h5>Submission file
            <div class="tooltipnew">( ? )
              <span class="tooltiptext">
              For all the other metadata files, the following options are available:<br><br>
              - Select existing: chose an already existing file (e.g. created using the 'Prepare Metadata' menu). The name must match the with the corresponding file (e.g. submission.xlsx or submission.csv for the submission file) <br><br>
              - Generate new from template: include an empty template (provided by the SPARC Curation Team) in your dataset. <br><br>
              - None: Do nothing (e.g. if you have already included the file in the 'main' folder under  the 'Specify dataset files' feature) </span>
            </div>
          </h5>

          <form id='submission-file-form'>
            <div>
              <input id="existing-submission" name="submission_file_option" type="radio" class="with-style" value="existing" />
              <label for="existing-submission" class=labelradio>Select existing</label>
            </div>
            <div>
              <input id="new-submission" name="submission_file_option" type="radio" class="with-style" value="new" />
              <label for="new-submission" class=labelradio> Generate new from template</label>
            </div>
            <div>
              <input id="no-submission" name="submission_file_option" type="radio" class="with-style" value="none" checked/>
              <label for="no-submission" class=labelradio> None </label>
            </div>
          </form>

          <div id="div-existing-submission" class="datasetsaveoption">
            <h5> </h5>
            <div class="demo-controls">
            <button id="button-select-submission" class="demo-button">Select submission file </button>
            <textarea class="demo-response" id="selected-submission"></textarea>
            </div>
          </div>

          <h5>Dataset description file</h5>

          <form id='description-file-form'>
            <div>
              <input id="existing-description" name="descripion_file_option" type="radio" class="with-style" />
              <label for="existing-description" class=labelradio>Select existing</label>
            </div>
            <div>
              <input id="new-description" name="descripion_file_option" type="radio" class="with-style" />
              <label for="new-description" class=labelradio> Generate new from template</label>
            </div>
            <div>
              <input id="no-description" name="descripion_file_option" type="radio" class="with-style" checked/>
              <label for="no-description" class=labelradio> None </label>
            </div>
          </form>

          <div id="div-existing-description" class="datasetsaveoption">
            <h5> </h5>
            <div class="demo-controls">
            <button id="button-select-description" class="demo-button">Select description file </button>
            <textarea id="selected-description" class="demo-response"></textarea>
            </div>
          </div>

          <h5>Subjects file</h5>

          <form id='subjects-file-form'>
            <div>
              <input id="existing-subjects" name="subjects_file_option" type="radio" class="with-style" />
              <label for="existing-subjects" class=labelradio>Select existing</label>
            </div>
            <div>
              <input id="new-subjects" name="subjects_file_option" type="radio" class="with-style" />
              <label for="new-subjects" class=labelradio> Generate new from template</label>
            </div>
            <div>
              <input id="no-subjects" name="subjects_file_option" type="radio" class="with-style" checked/>
              <label for="no-subjects" class=labelradio> None </label>
            </div>
          </form>

          <div id="div-existing-subjects" class="datasetsaveoption">
            <h5> </h5>
            <div class="demo-controls">
            <button id="button-select-subjects" class="demo-button">Select subjects file </button>
            <textarea class="demo-response" id="selected-subjects"></textarea>
            </div>
          </div>

          <h5>Samples file</h5>

          <form id='samples-file-form'>
            <div>
              <input id="existing-samples" name="samples_file_option" type="radio" class="with-style" />
              <label for="existing-samples" class=labelradio>Select existing </label>
            </div>
            <div>
              <input id="new-samples" name="samples_file_option" type="radio" class="with-style" />
              <label for="new-samples" class=labelradio> Generate new from template </label>
            </div>
            <div>
              <input id="no-samples" name="samples_file_option" type="radio" class="with-style" checked/>
              <label for="no-samples" class=labelradio> None </label>
            </div>
          </form>

          <div id="div-existing-samples" class="datasetsaveoption">
            <h5> </h5>
            <div class="demo-controls">
              <button id="button-select-samples" class="demo-button">Select samples file </button>
              <textarea class="demo-response" id="selected-samples"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button class="js-container-target demo-toggle-button"> Validate dataset before generating
          <div class="demo-meta u-avoid-clicks"> Verify that the information provided during the previous steps will create a SPARC-approved dataset using validator developed by the SPARC Curation Team </div>
        </button>
        <div class="demo-box">
          <p> Coming soon... Tentative date: February 2020 </p>
        </div>
      </div>
    </div>

    <div class="demo">
      <div class="demo-wrapper">
        <button class="js-container-target demo-toggle-button"> Generate dataset
          <div class="demo-meta u-avoid-clicks"> Create dataset based on information specified during the previous steps (dataset could be created locally or pushed directly to Blackfynn) </div>
        </button>

        <div class="demo-box">

          <h5> New dataset</h5>
          <form id = 'dataset-curate-form'>
            <div id = "div-existing-dataset">
              <input id="existing-dataset" name="new-dataset" type="radio" class="with-style" />
              <label id = "label-existing-dataset" for="existing-dataset" class=labelradio>Modify current dataset</label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext">This will add all changes to the current dataset folder. <br>
                  This option will only be available when 'Dataset already organized' option is selected</span>
                </div>
            </div>
            <div>
              <input id="create-newdataset" name="new-dataset" type="radio" class="with-style" />
              <label for="create-newdataset" class=labelradio>Create new dataset locally</label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext">This option will create the dataset at the desired location locally with all requested files</span>
                </div>
            </div>
            <div>
              <input id="cloud-dataset" name="new-dataset" type="radio" class="with-style" />
              <label for="cloud-dataset" class=labelradio>Create new dataset directly on Blackfynn</label>
                <div class="tooltipnew">( ? )
                  <span class="tooltiptext">This option will create the dataset with all requested files directly on your Blackfynn account</span>
                </div>
            </div>
          </form>

          <div id="div-create-new" class="datasetsaveoption">

            <h5> Select destination folder for new dataset </h5>
            <div class="demo-controls">
              <button id="button-select-new-dataset" class="demo-button"> Select Destination </button>
              <textarea class="demo-response" id="selected-new-dataset"></textarea>
            </div>

            <h5> Enter a name for the new dataset  </h5>
              <div class="demo-controls">
                <textarea class="demo-response" id="new-dataset-name"></textarea>
              </div>
          </div>

          <div id="div-create-cloud" class="datasetsaveoption">
            <p> Coming soon... Tentative date: December 2019</p>
          </div>

          <div id="div-curate-button" class="datasetsaveoption">
            <h5> Apply changes </h5>
            <button id="button-curate-dataset" class="demo-button"> Generate </button>
          </div>
          <div id="div-progress-print" class="datasetsaveoption">
            <h5> Progress </h5>
            <textarea id='progressinfo' class='outputprint' rows="25" readonly></textarea>
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
      require('./renderer-process/curate/radio-buttons-display')
    </script>

    <script type="text/javascript" src="./renderer-process/curate/table-script.js">
    </script>

  </section>
</template>
